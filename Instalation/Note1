Hibernates:

Steps to install hibernates to our system:
1. First create a maven prjct in eclipse: new-> others-> mavan prjct-> quickstype arc-> give name(com.java.hibernate)-> atifact id(hibernate_first_prjct)>
  inside the src will see src folder-> app.java file

2. Go to maven repo -> serach with hibernate orm core (select it)-> select updated one-> go below and copy the dependency.

3. come back to eclipse-> select pom.xml-> inside dependencies paste the copied code. and do a maven update(Ryt click for package select maven and update).
4. Likewise we shoulkd add mysql dependancy also foe exacmple like this inside the POM.xml

<dependency>
    <groupId>org.hibernate.orm</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>7.1.11.Final</version>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.33</version>
</dependency>

After adding, update the maven prjct.

5. Create a resourc folder: new-> resource-> give name(src/main/resource)-> save

6. Inside Resource we should create hibernate.cfn.xml  file.
***** How to instal Hibernate helper plugin:
Help-Eclipse market place-> search with Hibernate tool-> scroll down select jboss-> install
Deselect everything-> chgeck only hibernate tool and confirm-> accept agree and finish-> Restart-> ryt click on resource and select new -> other-> search with hibernate-> give the required info(no need to mention anything manually) or we can just finish it and later we can manually fill it.

inside that xml(Depends on our project we have to give the proper info here(

<hibernate-configuration>
    <session-factory>

        <!-- Database Connection -->
          <!-- we  should give info abt our class, name,pwd and URL-->
        <property name="hibernate.connection.driver_class">com.mysql.cj.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/hibernate-dec</property>         // hibernate-dec ntng but a SCHEMA name
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">root</property>

        <!-- Dialect -->
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>


        <!-- Hibernate Settings -->
        <property name="hibernate.hbm2ddl.auto">update</property>       //if we mention create instead of update, table will get created or  it will update the query
        <property name="show_sql">true</property>                       // it show the query in the console
        <property name="format_sql">true</property>

        <!-- Mapping your Entity Class -->
        <mapping class="com.hybernates.java.hybernates_java.emptable"/>                                    // it containes package complete name with the class name.
        <!-- Add more mappings here -->
        
    </session-factory>
</hibernate-configuration>




-------------------------------------------------

we should create a Class(pojo class)

emptable.java

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;

@Entity       //Hibernate scans all @Entity classes when building the SessionFactory. If your class doesnâ€™t have @Entity, Hibernate will ignore it.
@Tbale(name="table name")      // we can modify table name also
public class emptable {
	
	
	//id is our primary key hence we should use annotation here
	// Coulm : By deafult Hibernate assumes the column name is the same as the java field name. we use @column  to map a field name 

	@Id
	@Column(name="Empid")              
	int Empid;
	
	@Column(name="EmpName")
	String EmpName;
	
	@Column(name="dep")
	String dep;
	
	@Column(name="Sal")
	double sal;
	
	
	public int getEmpid() {
		return Empid;
	}
	public void setEmpid(int empid) {
		Empid = empid;
	}
	public String getEmpName() {
		return EmpName;
	}
	public void setEmpName(String empName) {
		EmpName = empName;
	}
	public String getDep() {
		return dep;
	}
	public void setDep(String doj) {
		this.dep = doj;
	}
	@Override
	public String toString() {
		return "emptable [Empid=" + Empid + ", EmpName=" + EmpName + ", dep=" + dep + ", sal=" + sal + "]";
	}
	public double getSal() {
		return sal;
	}
	public void setSal(double sal) {
		this.sal = sal;
	}
}


------------------
within our pcakage there will be one App class
inside that

package com.hybernates.java.hybernates_java;



import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;


/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args )
    {
    	
        //System.out.println( "Hello World!" );
    	// To use session factory we need to create a configuration
    
    	Configuration conf=new Configuration();
    	conf.configure("hibernate.cfg.xml");     // it fetch the xml file
    	conf.addAnnotatedClass(emptable.class);      // this will refer entity annotation class
    	
    	
    	// to create session we need session Factory. We should create only one Sfactory and we can create multiple sessions and use it.
    	SessionFactory fact=conf.buildSessionFactory();
    	
    	// 
    	Session session = fact.openSession();      //opening session
    	
    	emptable e1=new emptable();
    	e1.setEmpid(2);
    	e1.setEmpName("MeghuJ");
    	e1.setDep("HR");
    	e1.setSal(200000);
    	
    	
    	session.beginTransaction();        // to insert the data we should begin the transactions
    	
    	session.persist(e1);               // save method got deprecicated so we are using persist here
    	
    	session.getTransaction().commit();    // commit is ntng like a save
    	
    	System.out.println("DB....");
    	
    	
    }
}


Fetching data***************************************

System.out.println("Fetching data");
		
		Configuration con=new Configuration();
		con.configure();
		con.addAnnotatedClass(Student.class);
		
		SessionFactory factory=con.buildSessionFactory();
		
		Session ses= factory.openSession();
		Student a1 = ses.byId(Student.class).getReference(1);     // lazy fetching 
		System.out.println(a1);
		
		System.out.println();
		Student a2 = ses.find(Student.class, 01);    // eager fetching 
		
		System.out.println(a2);





Updating data*********************************

Student s1=new Student();
		s1.setSid(2);
		s1.setSname("MeghanaJ"); ////old one s1.setname("megh"); we are updating it to MeghanaJ
		s1.setFeese(970000);

		
		Configuration con=new Configuration();
		con.configure();
		con.addAnnotatedClass(Student.class);
		
		SessionFactory factory=con.buildSessionFactory();
		
		Session ses= factory.openSession();
		Student a1 = ses.byId(Student.class).getReference(1);     // lazy fetching 
		System.out.println(a1);
		
		System.out.println();
		Student a2 = ses.find(Student.class, 02);    // eager fetching 
		
		System.out.println(a2);
		
		
		org.hibernate.Transaction tra = ses.beginTransaction();     // Transaction is not mandatory for fetching data. but it's mandatory to modify or update data.
		
		ses.merge(s1);
		tra.commit();
		
		System.out.println("after merging");
		System.out.println(a2);

Deleting data************

Student delete = ses.find(Student.class, 3);
		ses.remove(delete);
		tra.commit();
		System.out.println(" deleting......");
		//System.out.println(delete);



--------------------------------------------


If u get any Errors related to mysql----> c drive /users/ourFolder/m2/mysql/ check if any extra sql are der just remove it


DATA RESOURCE: it manages the database (Session factory)

